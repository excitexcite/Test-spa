import{r as _,o as n,c as a,F as d,a as $,n as S,b as o,t as y,w as b,v as k,d as B,e as R,f as z,g as h,h as Q,_ as D,i as U,j as x,u as F,k as I,l as M,m as j,p as f,q as E,s as g,x as c,y as P,z as G}from"./index-0ca68b2e.js";import{d as H}from"./helpers-97901a36.js";const J={class:"test__options-list"},K=["for"],W=["id","value"],X={__name:"TestListOptions",props:["options"],setup(u){const e=_(null);return(i,t)=>(n(),a("ul",J,[(n(!0),a(d,null,$(u.options,(r,s)=>(n(),a("li",{key:s,class:S(["test__options-list-item",e.value===s?"test__options-list-item--active":""])},[o("label",{class:"test__option-label",for:s},y(r),9,K),b(o("input",{class:"test__option-radio",onChange:t[0]||(t[0]=l=>i.$emit("selectedOption",e.value)),type:"radio",id:s,value:s,"onUpdate:modelValue":t[1]||(t[1]=l=>e.value=l)},null,40,W),[[k,e.value]])],2))),128))]))}},Y={class:"test__options-list-colors"},Z=["for"],tt=["id","value"],et={__name:"TestColorsOptions",props:["options"],setup(u){const e=_(null);return(i,t)=>(n(),a("ul",Y,[(n(!0),a(d,null,$(u.options,(r,s)=>(n(),a("li",{key:s,class:"test__options-list-item-colors"},[o("label",{class:"test__option-label-color",for:s,style:B({"background-color":r})},null,12,Z),b(o("input",{class:"test__option-radio-color",type:"radio",onChange:t[0]||(t[0]=l=>i.$emit("selectedOption",e.value)),id:s,value:s,"onUpdate:modelValue":t[1]||(t[1]=l=>e.value=l)},null,40,tt),[[k,e.value]])]))),128))]))}},st={class:"test__options-list-image test__options-list"},ot=["for"],nt=["id","value"],lt={__name:"TestNumbersOptions",props:["options"],setup(u){const e=_(null);return(i,t)=>(n(),a("ul",st,[(n(!0),a(d,null,$(u.options,(r,s)=>(n(),a("li",{class:"test__options-list-item-image",key:s},[o("label",{class:"test__option-label-image",for:s},y(r),9,ot),b(o("input",{class:"test__option-radio-image sr-only",type:"radio",onChange:t[0]||(t[0]=l=>i.$emit("selectedOption",e.value)),id:s,value:s,"onUpdate:modelValue":t[1]||(t[1]=l=>e.value=l)},null,40,nt),[[k,e.value]])]))),128))]))}},at={class:"test__image-wrapper"},it=["src"],rt={__name:"TestQuestionImage",props:["question"],setup(u){return(e,i)=>(n(),a("div",at,[o("img",{src:`src/assets/${u.question.imgName}`,alt:"Изображение для вопроса"},null,8,it)]))}},ut={__name:"BaseProgressBar",props:["current","total"],setup(u){const e=u,i=_(null),t=_(0);let r;return R(()=>{r=i.value.getBoundingClientRect().width/e.total,t.value=r}),z(()=>e.current,(s,l)=>{if(s===0){t.value=r;return}l<e.total-1&&(t.value+=r)}),(s,l)=>(n(),a("div",{class:"test__progress-bar",ref_key:"container",ref:i},[o("span",{class:"test__progress",style:B({width:t.value+"px"})},null,4)],512))}},_t=o("div",{class:"header__logo-wrapper"},[o("img",{alt:"Site logo",src:x})],-1),ct=o("div",null,[o("p",{class:"header__title"},"Тест на определение IQ")],-1),pt={class:"page"},dt={__name:"TestLayout",setup(u){return(e,i)=>(n(),a(d,null,[h(D,null,{default:Q(()=>[_t,ct]),_:1}),o("main",pt,[U(e.$slots,"default")])],64))}};const mt={class:"test"},vt={class:"test__container"},ft=o("h1",{class:"test__process-title"},"Обработка результатов",-1),gt=o("p",{class:"test__process-subtitle"},"Определение стиля мышления...",-1),ht={class:"test__question"},kt={__name:"TestView",async setup(u){let e,i;const t=F(),r=I(),s=M(),l=_([]),T=_(!0),m=_(null),w=_(!1);[e,i]=j(()=>t.fetchQuestions()),await e,i(),l.value=t.questions,T.value=!1;const v=f(()=>t.currentQuestion),p=f(()=>l.value[v.value]),V=f(()=>p.value.optionsType==="numbers"?lt:p.value.optionsType==="colors"?et:X);function O(){t.isLast()?(C(),w.value=!0,H(5e3).then(()=>{t.currentQuestion=0,s.push("/result")})):N()}function N(){C(),t.currentQuestion++}function C(){r.saveAnswer(m.value),m.value=null}return($t,q)=>{const A=E("BaseSpinner");return n(),g(dt,null,{default:Q(()=>[o("section",mt,[o("div",vt,[h(ut,{current:c(v),total:l.value.length},null,8,["current","total"]),w.value?(n(),a(d,{key:0},[ft,h(A),gt],64)):(n(),a(d,{key:1},[o("h1",ht,y(c(p).question),1),c(p).imgName?(n(),g(rt,{key:0,question:c(p)},null,8,["question"])):P("",!0),(n(),g(G(c(V)),{key:c(v),onSelectedOption:q[0]||(q[0]=L=>m.value=L),options:c(p).options},null,40,["options"])),o("button",{onClick:O,class:S(["button test__next-button",m.value!==null?"button-primary":"button-primary--disabled"])}," Далее ",2)],64))])])]),_:1})}}};export{kt as default};
